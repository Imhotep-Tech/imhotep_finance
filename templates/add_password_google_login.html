{% extends "layout_login.html" %}

{% block body %}
<div class="form-container">
    
    <div class="message-container">
        {% if error %}
            <div class="error-message">
                {{ error }} <a href="/login_page">Sign in</a>
            </div>
        {% endif %}
        
        {% if error_existing %}
          <div class="error-message">
              {{ error_existing }}</a>
          </div>
      {% endif %}
    </div>
    {% include 'back.html' %}
    <p class="title">Welcome</p>
    <form action="/add_password_google_login" method="post" class="form" onsubmit="return validatePassword()">
      {{ form.hidden_tag() }}
      <input type="password" class="input" placeholder="Password" name="user_password" id="password" required="">
      <input type="password" class="input" placeholder="Confirm Password" id="confirm_password" required="">
      <label for="password-toggle" class="password-toggle-btn">
        <input type="checkbox" id="password-toggle" onclick="togglePasswordVisibility_all()">
        <span class="checkmark">Show password</span>
      </label>
      <p class="page-link"></p>
      <button class="form-btn"> 
        <i class="fas fa-user-plus"></i> Register
      </button>

    </form>
  </div>

  <script>
    function validatePassword() {
        var password = document.getElementById("password").value;
        var confirmPassword = document.getElementById("confirm_password").value;

        if (password !== confirmPassword) {
            alert("Passwords do not match!");
            return false;
        }
        return true;
    }

function togglePasswordVisibility_all() {
  var passwordInput = document.getElementById("password");
  var confirm_passwordInput = document.getElementById("confirm_password");
  if (passwordInput.type === "password") {
    passwordInput.type = "text";
  } else {
    passwordInput.type = "password";
  }

  if (confirm_passwordInput.type === "password") {
    confirm_passwordInput.type = "text";
  } else {
    confirm_passwordInput.type = "password";
  }
}
</script>
{% endblock %}